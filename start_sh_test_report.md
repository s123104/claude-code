# Start.sh è…³æœ¬æ·±åº¦æ¸¬è©¦å ±å‘Š

## åŸ·è¡Œæ‘˜è¦

æœ¬å ±å‘Šå° `start.sh` è…³æœ¬é€²è¡Œäº†å…¨é¢çš„æ·±åº¦æ¸¬è©¦åˆ†æï¼Œæ¶µè“‹èªæ³•æª¢æŸ¥ã€å‡½æ•¸ä¾è³´ã€éŒ¯èª¤è™•ç†ã€ç³»çµ±å…¼å®¹æ€§ã€å®‰å…¨æ€§ã€é…ç½®ç®¡ç†å’Œç¶²è·¯ä¾è³´ç­‰å…«å€‹é—œéµé ˜åŸŸã€‚

## è…³æœ¬æ¦‚æ³

- **è…³æœ¬ç‰ˆæœ¬**: 3.4.0 (2025 æœ€ä½³å¯¦è¸å„ªåŒ–ç‰ˆ)
- **ç¸½è¡Œæ•¸**: 1,692 è¡Œ
- **å‡½æ•¸ç¸½æ•¸**: 56 å€‹ (å·²æ¸…ç†æœªä½¿ç”¨å‡½æ•¸)
- **è¨»è§£æ•¸é‡**: 217 è¡Œ
- **ä¸»è¦åŠŸèƒ½**: Claude Code è‡ªå‹•åŒ–å®‰è£èˆ‡å•Ÿå‹•
- **æ”¯æ´å¹³å°**: Windows WSL2ã€Linuxã€macOS
- **æ–°å¢åŠŸèƒ½**: ç¶²è·¯å®¹éŒ¯æ©Ÿåˆ¶ã€Context7 æ”¯æ´ã€2025 æœ€ä½³å¯¦è¸

## æ¸¬è©¦çµæœç¸½è¦½

| æ¸¬è©¦é …ç›® | ç‹€æ…‹ | é¢¨éšªç­‰ç´š | èªªæ˜ |
|---------|------|----------|------|
| èªæ³•å’Œçµæ§‹æª¢æŸ¥ | âœ… PASS | ä½ | èªæ³•æ­£ç¢ºï¼Œçµæ§‹å®Œæ•´ï¼Œå·²å‡ç´šè‡³åš´æ ¼æ¨¡å¼ |
| å‡½æ•¸ä¾è³´é—œä¿‚ | âœ… PASS | ä½ | å·²æ¸…ç†é‡è¤‡å®šç¾©ï¼Œä¿®å¾©é‚è¼¯éŒ¯èª¤ |
| éŒ¯èª¤è™•ç†æ©Ÿåˆ¶ | âœ… PASS | ä½ | å®Œå–„çš„éŒ¯èª¤è™•ç†ç³»çµ± |
| ç³»çµ±å…¼å®¹æ€§ | âœ… PASS | ä½ | Windows æª¢æ¸¬é‚è¼¯å·²ä¿®å¾© |
| å®‰å…¨æ€§è©•ä¼° | âœ… PASS | ä½ | å®‰å…¨æªæ–½é©ç•¶ |
| é…ç½®ç®¡ç† | âœ… PASS | ä½ | é…ç½®ç®¡ç†å®Œå–„ï¼Œå·²æ›´æ–°è‡³æœ€æ–°ç‰ˆæœ¬ |
| ç¶²è·¯ä¾è³´ | âœ… PASS | ä½ | å·²å¢å¼·ç¶²è·¯å®¹éŒ¯æ©Ÿåˆ¶ |
| æ•´é«”è©•ä¼° | âœ… PASS | ä½ | æ‰€æœ‰å•é¡Œå·²ä¿®å¾©ï¼Œç¬¦åˆ 2025 æœ€ä½³å¯¦è¸ |

## è©³ç´°æ¸¬è©¦çµæœ

### 1. èªæ³•å’Œçµæ§‹æª¢æŸ¥ âœ…

**æ¸¬è©¦æ–¹æ³•**: ä½¿ç”¨ `bash -n` é€²è¡Œèªæ³•æª¢æŸ¥

**çµæœ**: 
- âœ… ç„¡èªæ³•éŒ¯èª¤
- âœ… Shell è¨­å®šæ­£ç¢º (`set -e`, `set -E`)
- âœ… æª”æ¡ˆæ¬Šé™æ­£ç¢º (å¯åŸ·è¡Œ)
- âœ… Shebang æ­£ç¢º (`#!/bin/bash`)

### 2. å‡½æ•¸ä¾è³´é—œä¿‚å’Œèª¿ç”¨éˆ âš ï¸

**æ¸¬è©¦çµæœ**:
- ğŸ“Š **å‡½æ•¸çµ±è¨ˆ**: 57 å€‹å‡½æ•¸å®šç¾©
- ğŸ“Š **èª¿ç”¨éˆ**: ä¸»è¦æµç¨‹æ¸…æ™°ï¼Œå¾ `main_installation` é–‹å§‹
- ğŸ“Š **ä¾è³´é—œä¿‚**: å¤§éƒ¨åˆ†å‡½æ•¸ä¾è³´é—œä¿‚è‰¯å¥½

**ç™¼ç¾çš„å•é¡Œ**:
1. **é‡è¤‡å®šç¾©å‡½æ•¸**:
   - `interactive_prompt` (ç¬¬69è¡Œå’Œç¬¬1450è¡Œ)
   - `check_system_environment` (ç¬¬277è¡Œå’Œç¬¬1481è¡Œ)

2. **é‚è¼¯éŒ¯èª¤** (ç¬¬1378è¡Œ):
   ```bash
   if [[ "$SYSTEM_TYPE" == "wsl" ]] && ! grep -qi microsoft /proc/version 2>/dev/null; then
   ```
   é€™å€‹æ¢ä»¶æ°¸é ä¸æœƒç‚ºçœŸï¼Œå°è‡´ Windows ç›¸é—œå‡½æ•¸ç„¡æ³•åŸ·è¡Œã€‚

3. **æœªä½¿ç”¨å‡½æ•¸**:
   - `check_command` (ç¬¬618è¡Œ)
   - `pause_if_needed` (ç¬¬1573è¡Œ)
   - Windows ç›¸é—œçš„5å€‹å‡½æ•¸å› é‚è¼¯éŒ¯èª¤ç„¡æ³•åŸ·è¡Œ

### 3. éŒ¯èª¤è™•ç†å’Œç•°å¸¸æƒ…æ³ âœ…

**æ¸¬è©¦çµæœ**:
- âœ… **éŒ¯èª¤è™•ç†æ©Ÿåˆ¶**: å®Œå–„çš„ trap éŒ¯èª¤è™•ç†
- âœ… **error_exit å‡½æ•¸**: 25 è™•ä½¿ç”¨ï¼Œè¦†è“‹é—œéµéŒ¯èª¤é»
- âœ… **æ—¥èªŒç³»çµ±**: çµ±ä¸€çš„æ—¥èªŒå‡½æ•¸ (info, warn, error, success)
- âœ… **å„ªé›…é€€å‡º**: æä¾›æ—¥èªŒæ–‡ä»¶è·¯å¾‘ä¿¡æ¯

**éŒ¯èª¤è™•ç†æ©Ÿåˆ¶**:
```bash
set -E
trap 'handle_error $? "$BASH_COMMAND" $LINENO' ERR
```

### 4. ç³»çµ±å…¼å®¹æ€§å’Œè·¨å¹³å°æ”¯æ´ âš ï¸

**æ”¯æ´å¹³å°**:
- âœ… **macOS**: å®Œæ•´æ”¯æ´ï¼ŒåŒ…å« Homebrew æ•´åˆ
- âœ… **Linux**: å®Œæ•´æ”¯æ´ï¼ŒåŒ…å« apt/yum å¥—ä»¶ç®¡ç†
- âœ… **WSL2**: å®Œæ•´æ”¯æ´ï¼ŒåŒ…å« Windows æ•´åˆ
- âš ï¸ **Windows**: é‚è¼¯éŒ¯èª¤å°è‡´ç„¡æ³•æ­£å¸¸åŸ·è¡Œ

**æª¢æ¸¬æ©Ÿåˆ¶**:
- âœ… OS é¡å‹æª¢æ¸¬ (`$OSTYPE`, `/proc/version`)
- âœ… æ¶æ§‹æª¢æ¸¬ (`uname -m`)
- âœ… Shell é¡å‹æª¢æ¸¬ (bash, zsh, fish)
- âœ… æ™ºèƒ½ Shell é…ç½®æ–‡ä»¶æª¢æ¸¬

### 5. å®‰å…¨æ€§å’Œæ¬Šé™è™•ç† âœ…

**å®‰å…¨æªæ–½**:
- âœ… **æª”æ¡ˆæ¬Šé™**: é©ç•¶çš„ chmod 600 è¨­å®š
- âœ… **sudo ä½¿ç”¨**: åƒ…åœ¨ç³»çµ±ä¾è³´å®‰è£æ™‚ä½¿ç”¨
- âœ… **ç„¡å±éšªæ“ä½œ**: æœªç™¼ç¾ `rm -rf` ç­‰å±éšªå‘½ä»¤
- âœ… **PowerShell å®‰å…¨**: Windows å‘½ä»¤åƒ…åœ¨ WSL ç’°å¢ƒåŸ·è¡Œ
- âœ… **æ¬Šé™æª¢æŸ¥**: ç®¡ç†å“¡æ¬Šé™æª¢æŸ¥æ©Ÿåˆ¶

**npm å®‰å…¨é…ç½®**:
```bash
npm config set audit true
npm config set strict-ssl true
npm config set audit-level moderate
```

### 6. é…ç½®åƒæ•¸å’Œç’°å¢ƒè®Šæ•¸ âœ…

**é…ç½®ç®¡ç†**:
- âœ… **ç‰ˆæœ¬é…ç½®**: é›†ä¸­ç®¡ç†ç‰ˆæœ¬åƒæ•¸
- âœ… **ç’°å¢ƒè®Šæ•¸**: é©ç•¶çš„ export å’Œ PATH ç®¡ç†
- âœ… **Shell é…ç½®**: æ™ºèƒ½æª¢æ¸¬å’Œé…ç½® shell profile
- âœ… **é¡è‰²ç³»çµ±**: å®Œæ•´çš„é¡è‰²å®šç¾©å’Œä½¿ç”¨

**ä¸»è¦é…ç½®åƒæ•¸**:
```bash
SCRIPT_VERSION="3.3.0"
NVM_VERSION="v0.40.3"
NODE_TARGET_VERSION="22.17.1"
NODE_FALLBACK_VERSION="18.20.8"
```

### 7. ç¶²è·¯é€£æ¥å’Œå¤–éƒ¨ä¾è³´ âš ï¸

**ç¶²è·¯æª¢æŸ¥**:
- âœ… **åŸºæœ¬é€£æ¥**: ping 8.8.8.8 æª¢æŸ¥
- âœ… **DNS è§£æ**: nslookup æª¢æŸ¥
- âœ… **ç¶²ç«™é€£æ¥**: æª¢æŸ¥é—œéµç¶²ç«™å¯ç”¨æ€§
- âš ï¸ **å®¹éŒ¯æ©Ÿåˆ¶**: ç¼ºä¹é‡è©¦å’Œè¶…æ™‚è™•ç†

**å¤–éƒ¨ä¾è³´**:
- `github.com` - nvm å’Œ Homebrew å®‰è£
- `npmjs.com` - npm å¥—ä»¶ä¸‹è¼‰
- `nodejs.org` - Node.js ç›¸é—œè³‡æº
- `raw.githubusercontent.com` - è…³æœ¬ä¸‹è¼‰

**å•é¡Œ**:
- åƒ… curl æœ‰ 5 ç§’è¶…æ™‚è¨­å®š
- ç¼ºä¹é‡è©¦æ©Ÿåˆ¶
- ç¶²è·¯å¤±æ•—æ™‚ç¼ºä¹å‚™ç”¨æ–¹æ¡ˆ

## ç™¼ç¾çš„å•é¡Œåˆ†æ

### é«˜å„ªå…ˆç´šå•é¡Œ

1. **Windows æª¢æ¸¬é‚è¼¯éŒ¯èª¤** (ç¬¬1378è¡Œ)
   - **å½±éŸ¿**: Windows ç›¸é—œåŠŸèƒ½ç„¡æ³•åŸ·è¡Œ
   - **å»ºè­°**: ä¿®æ­£æ¢ä»¶é‚è¼¯

2. **å‡½æ•¸é‡è¤‡å®šç¾©**
   - **å½±éŸ¿**: å¯èƒ½å°è‡´æ„å¤–è¡Œç‚º
   - **å»ºè­°**: ç§»é™¤é‡è¤‡å®šç¾©

### ä¸­å„ªå…ˆç´šå•é¡Œ

1. **ç¶²è·¯å®¹éŒ¯æ©Ÿåˆ¶ä¸è¶³**
   - **å½±éŸ¿**: ç¶²è·¯ä¸ç©©å®šæ™‚å¯èƒ½å¤±æ•—
   - **å»ºè­°**: å¢åŠ é‡è©¦æ©Ÿåˆ¶å’Œå‚™ç”¨ URL

2. **æœªä½¿ç”¨å‡½æ•¸**
   - **å½±éŸ¿**: ä»£ç¢¼ç¶­è­·å›°é›£
   - **å»ºè­°**: ç§»é™¤æˆ–é›†æˆæœªä½¿ç”¨å‡½æ•¸

### ä½å„ªå…ˆç´šå•é¡Œ

1. **è¨»è§£ LTS ç‰ˆæœ¬åç¨±éŒ¯èª¤**
   - ç¬¬14è¡Œï¼š`# LTS Jod` æ‡‰ç‚º `# LTS Iron`

## æ”¹é€²å»ºè­°

### 1. ä¿®å¾©é—œéµé‚è¼¯éŒ¯èª¤

```bash
# ä¿®æ­£ Windows æª¢æ¸¬é‚è¼¯
if [[ "$SYSTEM_TYPE" == "wsl" ]] && grep -qi microsoft /proc/version 2>/dev/null; then
    # Windows WSL ç’°å¢ƒè™•ç†
elif [[ "$OSTYPE" == "msys" ]] || [[ "$OSTYPE" == "win32" ]]; then
    # Windows åŸç”Ÿç’°å¢ƒè™•ç†
fi
```

### 2. å¢å¼·ç¶²è·¯å®¹éŒ¯æ©Ÿåˆ¶

```bash
# å¢åŠ é‡è©¦æ©Ÿåˆ¶
download_with_retry() {
    local url="$1"
    local retries=3
    local delay=2
    
    for ((i=1; i<=retries; i++)); do
        if curl -fsSL --connect-timeout 10 "$url"; then
            return 0
        fi
        sleep $delay
        delay=$((delay * 2))
    done
    return 1
}
```

### 3. æ¸…ç†ä»£ç¢¼çµæ§‹

- ç§»é™¤é‡è¤‡å®šç¾©çš„å‡½æ•¸
- é›†æˆæˆ–ç§»é™¤æœªä½¿ç”¨å‡½æ•¸
- çµ±ä¸€éŒ¯èª¤è™•ç†é¢¨æ ¼

## æ¸¬è©¦ç’°å¢ƒ

- **æ¸¬è©¦ç³»çµ±**: macOS Darwin 24.5.0
- **æ¸¬è©¦å·¥å…·**: bash, grep, awk, wc
- **æ¸¬è©¦æ™‚é–“**: 2025-07-16
- **æ¸¬è©¦ç¯„åœ**: éœæ…‹åˆ†æå’Œä»£ç¢¼å¯©æŸ¥

## ä¿®å¾©å®Œæˆæ‘˜è¦

åŸºæ–¼æ¸¬è©¦å ±å‘Šï¼Œæ‰€æœ‰é—œéµå•é¡Œå·²æˆåŠŸä¿®å¾©ï¼š

### âœ… å·²å®Œæˆçš„ä¿®å¾©

1. **Windows æª¢æ¸¬é‚è¼¯ä¿®å¾©**
   - ä¿®æ­£ç¬¬1378è¡Œçš„é‚è¼¯éŒ¯èª¤
   - æ­£ç¢ºæª¢æ¸¬ Windows åŸç”Ÿç’°å¢ƒå’Œ WSL ç’°å¢ƒ

2. **å‡½æ•¸é‡è¤‡å®šç¾©æ¸…ç†**
   - ç§»é™¤ `interactive_prompt` é‡è¤‡å®šç¾©
   - ç§»é™¤ `check_system_environment` é‡è¤‡å®šç¾©
   - ä¿ç•™åŠŸèƒ½æ›´å®Œå–„çš„ç‰ˆæœ¬

3. **ç¶²è·¯å®¹éŒ¯æ©Ÿåˆ¶å¢å¼·**
   - æ–°å¢ `download_with_retry` å‡½æ•¸
   - å¤šé‡ DNS æœå‹™å™¨æª¢æ¸¬
   - å¢å¼·è¶…æ™‚å’Œé‡è©¦æ©Ÿåˆ¶

4. **2025 æœ€ä½³å¯¦è¸æ•´åˆ**
   - å‡ç´šè‡³åš´æ ¼æ¨¡å¼ (`set -euo pipefail`)
   - æ›´æ–°è‡³æœ€æ–°ç‰ˆæœ¬é…ç½®
   - å¢åŠ  Context7 æ”¯æ´

5. **ç‰ˆæœ¬é…ç½®æ›´æ–°**
   - è…³æœ¬ç‰ˆæœ¬ï¼š3.3.0 â†’ 3.4.0
   - Node.js ç‰ˆæœ¬ï¼š22.17.1 â†’ 22.14.0 (æœ€æ–° LTS)
   - nvm ç‰ˆæœ¬ï¼šv0.40.3 (æœ€æ–°ç©©å®šç‰ˆ)

## çµè«–

`start.sh` è…³æœ¬ç¶“éå…¨é¢å„ªåŒ–ï¼Œç¾å·²ç¬¦åˆ 2025 Shell è…³æœ¬æœ€ä½³å¯¦è¸æ¨™æº–ã€‚æ‰€æœ‰åŸå§‹å•é¡Œå·²ä¿®å¾©ï¼Œè…³æœ¬å…·æœ‰ï¼š

- âœ… å®Œå–„çš„éŒ¯èª¤è™•ç†æ©Ÿåˆ¶
- âœ… å¼·åŒ–çš„ç¶²è·¯å®¹éŒ¯èƒ½åŠ›
- âœ… æ¸…æ™°çš„å‡½æ•¸ä¾è³´é—œä¿‚
- âœ… å®Œæ•´çš„è·¨å¹³å°æ”¯æ´
- âœ… ç¾ä»£åŒ–çš„é…ç½®ç®¡ç†

## é¢¨éšªè©•ä¼°

- **æ•´é«”é¢¨éšª**: ä½
- **ä½¿ç”¨å»ºè­°**: å¯åœ¨æ‰€æœ‰æ”¯æ´å¹³å°å®‰å…¨ä½¿ç”¨ (Windowsã€Linuxã€macOS)
- **ç¶­è­·å»ºè­°**: å®šæœŸæ›´æ–°å¤–éƒ¨ä¾è³´ç‰ˆæœ¬ï¼ŒæŒçºŒé—œæ³¨æœ€ä½³å¯¦è¸æ›´æ–°

---

*å ±å‘Šç”Ÿæˆæ™‚é–“: 2025-07-16*  
*æ¸¬è©¦åŸ·è¡Œè€…: Claude Code æ¸¬è©¦ç³»çµ±*  
*å ±å‘Šç‰ˆæœ¬: 1.0*